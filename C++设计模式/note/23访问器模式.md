### 技术交流QQ群:1027579432，欢迎你的加入！
#### 1.Visitor(访问器)模式动机
- 在软件构建过程中，由于需求的改变，某些**类层次结构中常常需要增加新的行为(方法)**。**如果直接在基类中做这样的更改，将会给子类带来很繁重的变更负担**，甚至破坏原有设计。
- **如何在不更改类层次结构的前提下**，在**运行时**根据需要透明地为类层次结构上的各个类动态添加新的操作，从而避免上述问题？
#### 2.Visitor(访问器)模式定义
- 表示一个作用于能够对象结构中的各元素的操作。使得可以在不改变(**稳定**)各元素的类的前提下定义(**扩展**)作用于这些元素的新操作(**变化**)。
![访问器模式示例程序UML类图，红色方框部分表示稳定的，蓝色方框部分表示变化的.png](https://upload-images.jianshu.io/upload_images/13407176-117cd5dd243cfcc7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
#### 3.Visitor(访问器)模式总结
- Visitor(访问器)模式通过所谓双重分发(double dispatch)来实现在**不更改(编译时，不添加新的操作)**Element类层次结构的前提下，在**运行时**透明地为类层次结构上的各个类动态添加新的操作(**支持变化**)。
- 所谓双重分发即Visitor(访问器)模式中间包括了两个多态分发(**注意其中的多态机制：**)第一个位accept方法的多态辨析；第二个为visitElementX方法的多态辨析。
- **Visitor(访问器)模式的最大缺点**：扩展类层次结构(**增添新的Element子类**)，会导致Visitor类的改变。因此，Visitor(访问器)模式适用于**Element类层次结构稳定，而其中的操作却经常面临频繁改动的场景**。
#### 4.资料下载
- [代码及笔记，欢迎star,follow,fork......](https://github.com/cdlwhm1217096231/cpp_ws/tree/master/C%2B%2B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F)